syntax = "proto3";

package wallet;

// 生成的文件路径
option go_package = "./wallet";

// 创建钱包
message CreateWalletReq {
  int64 uid = 1;
}

// 返回地址
message CreateWalletResp {
  string address = 1;
}

// 获取余额
message GetBalanceReq {
  int64 uid = 1;
  string currency = 2; // 例如 "ETH"
}

message GetBalanceResp {
  string balance = 1;
  string currency = 2;
}

// 充值
message DepositReq {
  int64 uid = 1;
  string amount = 2;
  string tx_id = 3;
}

message DepositResp {
  bool success = 1;
  string new_balance = 2;
}

// 提现
message WithdrawReq {
  int64 uid = 1;
  string amount = 2; // 金额
  string tx_id = 3;  // 业务流水号
}

message WithdrawResp {
  bool success = 1;
  string tx_hash = 2; // 模拟返回一个链上哈希
}

// 服务接口
service Wallet {
  rpc CreateWallet(CreateWalletReq) returns(CreateWalletResp);
  rpc GetBalance(GetBalanceReq) returns(GetBalanceResp);
  rpc Deposit(DepositReq) returns(DepositResp);
  rpc Withdraw(WithdrawReq) returns(WithdrawResp);
}